pipeline 
{
	agent  { label 'WinNode' } //'Win-Node-1' 
	stages 
	{
		stage('CleanWorkSpace')
		{
			steps 
			{
				echo("Clean Exising Workspace")
				echo "$JENKINS_HOME"
				echo "$WORKSPACE"
				cleanWs()
				sleep(time:3,unit:"SECONDS")
				}
		}
		stage('Execution')
		{
			steps 
			{
				bat 'mvn test -Dtest=RunnerClass'
			}
		} 
	}		
	post
	{
		always
		{
			sleep(time:3,unit:"SECONDS")
			cucumber buildStatus: 'UNCHANGED', customCssFiles: '', customJsFiles: '', fileIncludePattern: '**/*.json', jsonReportDirectory: 'target/cucumber-report/', reportTitle: 'Report', sortingMethod: 'ALPHABETICAL', trendsLimit: 5
		}
	}	
}


